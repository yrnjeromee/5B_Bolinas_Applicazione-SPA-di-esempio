<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" type="text/css" href="index.css" />
   <title>SPA Bolinas</title>
</head>
<body>
   <div id="container" class="container">
    <div id="pagina0" class="page">
      <div class="row">
      </div>
        <div class="row"><a href="#pagina1">Questo è un link a pagina 1</a></div>         
        <div class="row"><a href="#pagina2">Questo è un link a pagina 2</a></div>
        <div class="row"><a href="#pagina3">Questo è un link a pagina 3</a></div>                  
    </div>
      <div id="pagina1" class="page">
         <div class="row">
            <h1>Componenti</h1>
            <p>Partendo dal modello di funzionamento della pagina web (<a href="https://cipiaceinfo.it/docs/programmazione/javascript/una-semplice-applicazione-javascript/" data-type="epkb_post_type_1" data-id="333">evento, azione, reazione</a>) e la programmazione ad oggetti in Javascript (<a href="https://cipiaceinfo.it/docs/programmazione/javascript/oggetti-e-classi/" data-type="epkb_post_type_1" data-id="355">oggetti e classi</a>) possiamo progettare applicazioni web che si basano sul concetto di componente. </p>
            <p>Un componente è una porzione della pagina web che contiene in modo completo sia una parte della pagina HTML che interagisce con l’utente, sia tutto il codice Javascript necessario a farlo funzionare.</p>
            <img fetchpriority="high" decoding="async" width="688" height="892" src="https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20.png" alt="" class="wp-image-792" style="width:432px;height:auto" srcset="https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20.png 688w, https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20-231x300.png 231w, https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20-230x298.png 230w, https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20-350x454.png 350w, https://cipiaceinfo.it/wp-content/uploads/2024/09/Screenshot-2024-09-26-alle-14.12.20-480x622.png 480w" sizes="(max-width: 688px) 100vw, 688px">
            <p>In pratica il componente è un elemento autoconclusivo della applicazione Web, collegato ad un elemento della pagina, che gestisce autonomamente, tramite un oggetto, l’interazione con l’utente e la gestione delle logiche applicative ad esso collegate. Ad esempio un componente potrebbe essere una tabella, una form, un elemento contenente informazioni dinamiche, un elenco. Inoltre i componenti possono essere anche contenitori di altri componenti, come ad esempio tabelle complesse, dove ogni riga è essa stessa un componente. </p>
            <p>Le architetture a componenti sono alla base delle applicazioni Javascript moderne, e sono utilizzati da tutti i framework Javascript più diffusi, come React, Vue ed Angular. </p>
            <p>In questa lezione vedremo come è possibile utilizzare i componenti anche con Javascript nativo. </p>
            <h2>Clousure</h2>
            <p>Una closure, in programmazione, è una funzione che restituisce un oggetto che oltre ad avere metodi e proprietà propri, è in grado di utilizzare variabili e funzioni create nella funzione stessa, che continuano ad esistere anche dopo che la funzione ha terminato la sua esecuzione. Questo può apparire controintuitivo, perché una funzione crea le sue variabili locali nello stack e quindi al termine della sua esecuzione normalmente lo stack viene liberato e quindi le variabili sono cancellate.</p>
            <p>Ad esempio in questa funzione:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="1"><span class="token keyword">const</span> <span class="token function-variable function">myFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> c <span class="token operator">=</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
               
               <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            </div>
            <p>dopo averla eseguita la variabile c viene cancellata dalla memoria. Tuttavia Javascript (ed altri linguaggi) consente di restituire oggetti che continuano ad esistere dopo il termine della funzione e che inoltre possono ancora utilizzare variabili create dentro la funzione, come in questo esempio:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="2"><span class="token keyword">const</span> <span class="token function-variable function">createAdder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                  <span class="token function-variable function">sum</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    sum <span class="token operator">+=</span> value<span class="token punctuation">;</span>
                    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
              
              <span class="token keyword">const</span> adder <span class="token operator">=</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">adder</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stampa 3</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">adder</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stampa 6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            </div>
            <p>Come si può vedere stavolta la variabile sum rimane in memoria anche dopo che la funzione ha terminato la sua esecuzione. Questo perché viene ancora referenziata dalla funzione sum. Questo sistema rende possibile quindi creare oggetti che hanno una o più variabili (o metodi) privati, inaccessibili all’esterno, e garantisce una delle caratteristiche fondamentali della programmazione ad oggetti, ovvero l’incapsulamento.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_1">Un componente tabella</h2>
            <p>Un componente deve quindi gestire l’intero ciclo di vita applicativo, quindi sia la fase di render iniziale, sia la gestione di evento, azione e reazione (cioè la nuova render). In questo esempio scriviamo una semplice tabella sotto forma di componente. Questa tabella avrà le seguenti proprietà private: parentElement (che contiene il riferimento all’elemento del DOM in cui essere inserita) e data (che contiene i dati della tabella, espressi come array bidimensionale, dove la prima riga contiene le intestazioni).</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="3"><span class="token keyword">const</span> <span class="token function-variable function">createTable</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">parentElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> data<span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                  <span class="token function-variable function">build</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">dataInput</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    data <span class="token operator">=</span> dataInput<span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">let</span> htmlTable <span class="token operator">=</span> <span class="token string">"&lt;table&gt;"</span><span class="token punctuation">;</span>
                    htmlTable <span class="token operator">+=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
                      <span class="token string">"&lt;tr&gt;"</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">col</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
                        <span class="token string">"&lt;td&gt;"</span> <span class="token operator">+</span> col <span class="token operator">+</span> <span class="token string">"&lt;/td&gt;"</span>
                      <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
                    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"&lt;/tr&gt;"</span><span class="token punctuation">;</span>
                    htmlTable <span class="token operator">+=</span> <span class="token string">"&lt;/table"</span><span class="token punctuation">;</span>
                    parentElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> htmlTable<span class="token punctuation">;</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
              <span class="token keyword">const</span> table1 <span class="token operator">=</span> <span class="token function">createTable</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#table1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              table1<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"Cognome"</span><span class="token punctuation">,</span> <span class="token string">"Voto"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Pogba"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Vlahovic"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Thuram"</span><span class="token punctuation">,</span> <span class="token number">6.5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              table1<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">const</span> table2 <span class="token operator">=</span> <span class="token function">createTable</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#table2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              table2<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"Squadra"</span><span class="token punctuation">,</span> <span class="token string">"punti"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Torino"</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Napoli"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"Udines"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              table2<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            </div>
            <p>Come si può osservare abbiamo creato due oggetti tabella, associati a due contenitori distinti del DOM. E’ anche possibile rapidamente cambiare i dati usando il metodo build() ed eseguendo una nuova render().</p>
            <h2 class="wp-block-heading" data-id="articleTOC_2">Un componente form</h2>
            <p>In questo caso creiamo una semplice form che espone 3 metodi pubblici (setLabels, onsubmit e render) che gestiscono le label della form, la render e la onsubmit che associa la callback da eseguire una volta che l’utente ha cliccato. Qui il codice:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="4"><span class="token keyword">const</span> <span class="token function-variable function">createForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">parentElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> data<span class="token punctuation">;</span>
                <span class="token keyword">let</span> callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>  
                  <span class="token function-variable function">setLabels</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">labels</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> data <span class="token operator">=</span> labels<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  
                  <span class="token function-variable function">onsubmit</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">callbackInput</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> callback <span class="token operator">=</span> callbackInput<span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
                    parentElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> 
                      data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                          <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n&lt;input id="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" type="text" /&gt;&lt;/div&gt;`</span></span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
                        <span class="token operator">+</span> <span class="token string">"&lt;button type='button' id='submit'&gt;Submit&lt;/button&gt;"</span><span class="token punctuation">;</span>  
                    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#submit"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token comment">// modo 1: lista di valori</span>
                      <span class="token keyword">const</span> result <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token comment">// modo 2 alternativo dizionario</span>
                      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                      data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        result<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token function">callback</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>          
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">createForm</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              form<span class="token punctuation">.</span><span class="token function">setLabels</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"Nome"</span><span class="token punctuation">,</span> <span class="token string">"Cognome"</span><span class="token punctuation">,</span> <span class="token string">"Età"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              form<span class="token punctuation">.</span><span class="token function">onsubmit</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
              form<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            </div>
            <p>Ricapitolando:</p>
            <ul class="wp-block-list">
                <li>il metodo <strong>setLabels</strong> definisce le label associate agli input della form;</li>
                <li>il metodo <strong>onSubmit</strong> serve per indicare all’oggetto form quale sarà la funzione callback da richiamare una volta che è stata effettuata la submit (cioè quando l’utente preme il pulsante submit)</li>
                <li>il metodo <strong>render</strong> fa due cose: 
                <ul class="wp-block-list">
                <li>crea la form dinamicamente in base alle labels definite sopra e la inserisce nel contenitore <strong>parentElement</strong>;</li>
                <li>dopo il rendering, viene gestito il click al pulsante, che attiva una funzione che prima raccoglie i dati inseriti dall’utente nelle input e li mette in una lista, e poi richiama la funzione di <strong>callback</strong> memorizzata dal metodo onSubmit</li>
                </ul>
                </li>
            </ul>
         </div>
         <div class="row"><a href="#pagina0">Questo è un link alla homepage</a></div>
         <div class="row"><a href="#pagina2">Questo è un link a pagina 2</a></div>
         <div class="row"><a href="#pagina3">Questo è un link a pagina 3</a></div>                  
      </div>
      <div id="pagina2" class="page">
        <div class="row">
          <h1 class="eckb-article-title">Creare una Web Application</h1>
          <div id="eckb-article-content-body"><p>Nel momento in cui si comincia a realizzare applicazioni web complesse, emergono tre problematiche:</p>
            <ol class="wp-block-list">
            <li>E’ necessario s<strong>uddividere il progetto in più files</strong>, per garantire maggiore leggibilità del codice, rendere possibile lavorare in contemporanea su più componenti da parte di team di progetto, ed infine poter riusare componenti in progetti successivi.</li>
            <li>Una applicazione complessa può utilizzare <strong>librerie e strumenti realizzati da terze parti</strong>, presenti in repository disponibili su Internet.</li>
            <li>Le <strong>configurazioni</strong> nei progetti condivisi su Internet devono essere separate in modo netto dal codice, in modo da garantire sia la sicurezza (es. delle password di accesso ad un database) sia la possibilità di utilizzare la stessa applicazione in ambienti di esecuzione differenti.</li>
            </ol>
            <p>Vedremo in questa lezione come risolverle.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_0">Cosa è un progetto?</h2>
            <p>Un progetto può essere definito come l’insieme dei prodotti software che il team di programmatrori realizza per far funzionare l’applicazione. Esso è costituito principalmente da 4 principali tipologie di artefatti:</p>
            <ul class="wp-block-list">
            <li>il <strong>codice sorgente</strong> (<strong>codebase</strong>) dell’applicazione scritto dai programmatori stessi, suddiviso in uno o più files;</li>
            <li><strong>librerie</strong> di terze parti, ovvero codice (o librerie compilate) scritte da terze parte, che vengono utilizzate dal codice sorgente;</li>
            <li>gli <strong>asset</strong> di progetto, ovvero files che non contengono codice che deve essere eseguito ma elementi comunque necessari per funzionare: icone, immagini, font, CSS, audio, video, ecc.;</li>
            <li>le <strong>configurazioni</strong>, ovvero files che contengono informazioni per far funzionare il software in un determinato contesto di esecuzione (ovvero un ambiente)</li>
            </ul>
            <p>Questi 4 elementi sono chiamati nel loro insieme <strong>deliverable</strong>, ovvero i componenti del pacchetto che verrà distribuito al committente, che viene chiamato <strong>build</strong>. </p>
            <p>In un progetto Javascript vanno quindi gestiti insieme come una unica entità, in questa sede approfondiremo in particolare librerie e configurazioni.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_1"><strong>Librerie</strong></h2>            
            <p>Le librerie sono un insieme di strumenti e tool realizzati da terzi che importiamo nel nostro progetto che implementano funzioni semplificando il nostro lavoro di codifica. Si ricorda che le librerie possono essere sia codice compilato e relativi simboli sia codice sorgente anche in linguaggi differenti da quello che usiamo, ma in ogni caso <strong>non vanno mai considerate parte della codebase che produce lo sviluppatore</strong>.&nbsp;</p>
            <p>Non bisogna invece inoltre fare confusione con le librerie di sistema, che vengono anch’esse utilizzate dal programmatore, ma che non sono parte dei deliverable (sono fornite “chiavi in mano” direttamente con il linguaggio e il runtime). Ad esempio DOM e BOM sono librerie di sistema.</p>
            <p>Quando si vogliono librerie di terze parti esistono due diversi modi per utilizzarle:</p>
            <ul class="wp-block-list">
            <li>il primo è quello di includerle direttamente nell’HTML tramite il tag &lt;script src=”url” …/&gt; dove la url è una URL pubblica che contiene la libreria pronta per essere usata. Questa risorsa è distribuita su Internet tramite server distribuiti chiamati CDN (Content Delivery Network) ed ha il grande vantaggio che non dobbiamo scaricare nulla nel nostro progetto. Ma anche lo svantaggio che il nostro progetto dipende dalla disponibilità di una risorsa su Internet (non garantita) e che se questa URL non funziona lo si scopre solo a <strong>runtime</strong>.</li>
            <li>Il secondo è quello di scaricare la libreria, metterla in una qualche cartella del progetto, e poi includerla con il tag &lt;script&gt;. Con questo sistema si garantisce che tutti i files del progetto sono nella cartella di progetto senza dipendenze esterne, a <strong>build time</strong>.</li>
            </ul>
            <p>Ad esempio la libreria Bootstrap è utilizzabile in entrambi i modi. </p>
            <p>Nei progetti reali si usa sempre il secondo sistema, per evitare rischi di dipendenze verso sistemi esterni. Il problema che si pone, tuttavia, è che se si usano molte librerie di terze parti si crei nel proprio progetto una confusione di cartelle e sottocartelle, senza permetterci di capire cosa abbiamo incluso, dove si trova, cosa non ci serve più. Va poi considerato il problema di andare a cercare queste librerie, scaricandole ciascuna dal suo sito web, vedere se sono uscite nuove versioni, ecc.</p>
            <p>In pratica è necessario tenere un database delle librerie di progetto e possibilmente una cartella che le possa contenere tutte. Per risolvere questo problema viene in aiuto Npm.</p>
            <h3 class="wp-block-heading" data-id="articleTOC_2">Npm e Package.json</h3>
            <p>Per usare Npm bisogna installare NodeJS.</p>
            <p>Finora Javascript è stato visto come un linguaggio che funziona all’interno di una pagina web che per funzionare quindi ha bisogno di un browser ed una pagina html. In realtà a partire dal 2012 è stato sviluppato un runtime in grado di eseguire Javascript anche senza un un browser.  Questo prodotto si chiama&nbsp;<strong>NodeJs</strong>, e grazie a questo è diventato possibile realizzare applicazioni eseguibili sulla maggior parte dei sistemi operativi (per approfondire si rimanda a questa <a href="https://cipiaceinfo.it/docs/programmazione/nodejs/introduzione-a-nodejs/" data-type="epkb_post_type_1" data-id="576">lezione</a>).</p>
            <p>Insieme a NodeJS è stato introdotta una applicazione, Node Package Manager <strong>Npm</strong>&nbsp;è il package manager di Node (“Node Package Manager”). Npm è una applicazione che si appoggia ad un database unificato su Internet (www.npmjs.com) che contiene la quasi totalità delle librerie esistenti per il linguaggio Javascript. Tramite un unico comando npm è quindi possibile <strong>installare</strong> e <strong>disinstallare</strong> qualsiasi libreria, in <strong>qualsiasi</strong> <strong>versione</strong>, il tutto <strong>in una sola cartella </strong>e memorizzare in un file di configurazione le librerie installate al momento nel progetto. </p>
            <p>La cartella dove sono contenute tutte le librerie si chiama <strong>node_modules</strong> e il file di configurazione si chiama <strong>package.json</strong>.  In realtà package.json fa molto più di questo: esso permette di definire un insieme di metadati di progetto (autore, titolo, versione, licenza, ecc.) e memorizza anche un insieme di comandi utili per far funzionare il progetto (es. per eseguire test, per eseguirlo, ecc.). </p>
            <p>Qui un esempio di package.json.</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-json" data-lang="JSON"><code class=" language-json" data-hcb-clip="1"><span class="token punctuation">{</span>
              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">,</span>
              <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
              <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"simple Hello World application"</span><span class="token punctuation">,</span>
              <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
              <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"cipiaceinfo.it"</span><span class="token punctuation">,</span>
              <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
              <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                 <span class="token property">"mylibrary"</span><span class="token operator">:</span> <span class="token string">"1.1.0"</span>  
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            <p>Un file package.json viene inizializzato col comando </p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-bash" data-lang="Bash"><code class=" language-bash" data-hcb-clip="2"><span class="token function">npm</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
            <p>Per installare una libreria bisogna conoscerne il nome (reperibile sul sito web sopra indicato) e poi eseguire il comando</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-bash" data-lang="Bash"><code class=" language-bash" data-hcb-clip="3"><span class="token function">npm</span> <span class="token function">install</span> --save miopacchetto<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
            <p>Npm scaricherà il pacchetto lo metterà nella cartella node_modules, aggiornerà il package.json e sarà quindi possibile usarla. </p>
            <h2 class="wp-block-heading" data-id="articleTOC_3">Gestione delle dipendenze: import ed export</h2>
            <p>Finora nei casi in cui si sono scritti progetti con più files JS questi files sono stati inclusi nella pagina HTML con il tag script:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-html" data-lang="HTML"><code class=" language-html" data-hcb-clip="4"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file1.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file2.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>
            <p>Con questo metodo il browser carica in sequenza tutti gli script e rende disponibili le funzioni e le variabili (globali) del file1.js a quelli successivi (file2.js) ma non ovviamente viceversa (quindi file1.js non “vede” gli oggetti presenti in file2.js).</p>
            <p>Questo metodo, molto rapido, e molto usato fino al 2015 (era l’unico possibile) è però concettualmente sbagliato. Prima di tutto perché i files JS potrebbero essere decine o centinaia, inoltre perché non potrebbero essere necessari tutti e subito, rallentando quindi il caricamento della pagina web. Infine, ed è il problema più importante, tutti gli oggetti sono di fatto globali rendendo quindi molto facile avere sovrapposizione di variabili o peggio utilizzi errati e confusionari di oggetti creati chissà dove, rendendo praticamente impossibile gestire qualsiasi progetto che superi qualche centinaio di righe.</p>
            <p>Dal 2015 con ES6 è stato definito il nuovo standard ES Modules che prevede invece che ogni file script possa definire un insieme di simboli che possa esportare, ed un insieme di simboli che possa importare. Facciamo un esempio: poniamo di definire un insieme di costanti in un file Javascript <strong>conf.js</strong></p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="5"><span class="token keyword">export</span> <span class="token keyword">const</span> configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
             <span class="token string">"singola"</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
             <span class="token string">"doppia"</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
             <span class="token string">"tripla"</span><span class="token punctuation">:</span> <span class="token number">3</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">export</span> <span class="token keyword">const</span> cacheToken <span class="token operator">=</span> <span class="token string">"123456789abcdefg"</span><span class="token punctuation">;</span>
            <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            <p>Questo file esporta uno più oggetti verso altri script.</p>
            <p>Per importare questi oggetti si usa import:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="6"><span class="token keyword">import</span> <span class="token punctuation">{</span> configuration<span class="token punctuation">,</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./conf.js'</span><span class="token punctuation">;</span>
            <span class="token function">log</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>
            <p>Come si vede è possibile scegliere anche cosa importare. La potenza di questo sistema è che permette di importare solo quel che serve senza usare oggetti globali. </p>
            <p>Ogni script può sia importare che esportare e quindi è possibile creare un grafo orientato (necessariamente aciclico) di dipendenze come nell’esempio seguente:</p>
            <figure class="wp-block-image size-large"><img fetchpriority="high" decoding="async" width="1024" height="399" src="https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-1024x399.png" alt="" class="wp-image-947" srcset="https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-1024x399.png 1024w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-300x117.png 300w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-768x299.png 768w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-1000x390.png 1000w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-230x90.png 230w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-350x136.png 350w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33-480x187.png 480w, https://cipiaceinfo.it/wp-content/uploads/2024/10/Screenshot-2024-10-24-alle-18.28.33.png 1406w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>
            <h2 class="wp-block-heading" data-id="articleTOC_4">File di configurazione</h2>
            <p>Pacage.json non è l’unico file di configurazione. Sono molto importanti anche altre configurazioni e nello specifico:</p>
            <ul class="wp-block-list">
            <li>file contenenti password di autenticazione;</li>
            <li>file contenenti strutture di dati che definiscono un contesto di esecuzione, ad esempio indirizzi IP, label da visualizzare, parole chiave, ecc.</li>
            </ul>
            <p> Queste due tipologie di configurazione vanno tenute separate dalla codebase perché contengono informazioni che non sono codice eseguibile e che soprattutto possono cambiare se si installa l’applicazione in contesti differenti. <strong>Ricordarsi sempre che bisogna separare sempre l’astrazione (il codice) dai dettagli (le configurazioni). </strong></p>
            <p><em><strong>Inoltre quando si usa git, bisogna tenere questi files non solo separati dalla codebase, ma anche fuori dal tracciamento di git, inserendoli nel file .gitignore.</strong></em></p>
            <p>Le configurazioni non sono mai codice, anche se inserite in file JSON o Javascript. Per importarle è poi possibile includere nel progetto o tramite il meccanismo di import oppure in alternativa caricandole tramite fetch (una GET verso la URL dove si trova la configurazione). </p>
            </div>
        </div>         
        <div class="row"><a href="#pagina0">Questo è un link alla homepage</a></div>
         <div class="row"><a href="#pagina1">Questo è un link a pagina 1</a></div>
         <div class="row"><a href="#pagina3">Questo è un link a pagina 3</a></div>                  
      </div>
      <div id="pagina3" class="page">         
        <div class="row">
          <h1 class="eckb-article-title">Single Page Application</h1>
          <div id="eckb-article-content-body"><p>Una Single Page Application è una applicazione Web Javascript composta da una sola pagina html, ma che può comprendere diverse pagine visualizzabili dall’utente. In pratica anzichè utilizzare il sistema tradizionale per cui ad ogni pagina Web corrisponde una pagina HTML con un eventuale Javascript associato,  viene caricata una sola pagina, ed è il programma Javascript a mostrare (o nascondere) dinamicamente la singola pagina dell’applicazione attualmente visualizzata.</p>
            <p>Il grosso vantaggio di questo tipo di applicazione è che il caricamento della pagina è praticamente istantaneo (nessuna latenza) e questo da all’utente la percezione non di navigare su un sito ma di utilizzare una applicazione locale, dove l’utilizzo della rete è ridotto al solo di scambio di dati col server.</p>
            <p>Il meccanismo più semplice per gestire una SPA è attraverso la creazione di “pagine logiche” definite da un tag specifico (ad esempio &lt;div&gt;) all’interno della pagina HTML e poi realizzare un componente JS con il ruolo di “navigatore”, che secondo regole ben definite, mostra in ogni momento una sola di queste pagine. </p>
            <p>Nel progetto qui presentato realizzeremo un tipo di pagina di questo tipo, con queste caratteristiche:</p>
            <ol class="wp-block-list">
            <li>La pagina è suddivisa in contenitori<code><strong> &lt;div&gt;</strong></code> che contengono i componenti di una singola pagina logica.</li>
            <li>Ogni pagina è associata ad una URL interna (che contiene quindi un suffisso “#nomepagina”) ovvero utilizzando la forma <code>https//miosito/path/pagina.html<strong>#nomepagina</strong></code>, dove ad ogni pagina viene associata una URL univoca. Quindi per ogni url interna avremo un contenitore div che contiene una specifica pagina logica. Le singole pagine possono contenere link ad altre pagine logiche, permettendo quindi una navigazione interna.</li>
            <li>E’ presente poi un componente navigator che contiene una funzione che analizza la URL corrente, ed in base a questa mostra la pagina corrispondente.</li>
            <li>Infine il navigator intercetta l’evento di cambio pagina, esegue la funzione del punto precedente e cambia la pagina visualizzata, in modo del tutto trasparente per l’utente.</li>
            </ol>
            <p>Vediamo un esempio di codice funzionante, da personalizzare poi per i propri progetti.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_0">HTML</h2>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-html" data-lang="HTML"><code class=" language-html" data-hcb-clip="1"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span>
                  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./style.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>SPA semplice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pagina1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è il contenuto di pagina 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>                  
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pagina2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è il contenuto di pagina 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>         
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>                  
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pagina3<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>page<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>         
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#pagina2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è un link a pagina 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>                  
                     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Questo è il contenuto di pagina 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./index.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            <p>come si può vedere ogni &lt;div&gt; di pagina è caratterizzato da una classe “page” in modo da essere identificabile dal componente navigator. L’id del div corrisponde alla URL interna del sito, pertanto ad esempio http://miosito/spa.html#pagina2 corrisponde alla visualizzazione del &lt;div&gt; con id=”pagina2″. Osservare poi che le ancore hanno lo stesso nome delle pagine presenti (col prefisso “#”).</p>
            <h2 class="wp-block-heading" data-id="articleTOC_1">CSS</h2>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-css" data-lang="CSS"><code class=" language-css" data-hcb-clip="2"><span class="token selector">.visible</span> <span class="token punctuation">{</span>
               <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">.hidden</span> <span class="token punctuation">{</span>
               <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            <p>Sono necessarie due classi CSS per gestire la visibilità delle singole pagine, come vedremo qui sotto.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_2">Javascript: Navigator</h2>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-js" data-lang="JavaScript"><code class=" language-js" data-hcb-clip="3"><span class="token keyword">const</span> <span class="token function-variable function">hide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">elements</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               elements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> <span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
            <span class="token punctuation">}</span>
            <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createNavigator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">parentElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               <span class="token keyword">const</span> pages <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>parentElement<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".page"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">const</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword">const</span> pageName <span class="token operator">=</span> url<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"#"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword">const</span> selected <span class="token operator">=</span> pages<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> page<span class="token punctuation">.</span>id <span class="token operator">===</span> pageName<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> pages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                  <span class="token function">hide</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token function">show</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
               window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span> render<span class="token punctuation">)</span><span class="token punctuation">;</span> 
               <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
            <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            <p>La funzione <strong>hide</strong> ha lo scopo di nascondere tutte le pagine prima di mostrare la nuova pagina. La funzione <strong>show</strong> invece mostra la sola pagina selezionata.</p>
            <p>Veniamo al costruttore del navigator. L’istruzione:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="4">   const pages = Array.from(parentElement.querySelectorAll(".page"));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></button></div>
            <p>seleziona tutti i div con classe “page”, ovvero le pagine logiche.</p>
            <p>Le istruzioni:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="5">const url = new URL(document.location.href);
            const pageName = url.hash.replace("#", "");<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>
            <p>servono a estrarre dal suffisso il nome della pagina, che sappiamo corrispondere alla pagina.</p>
            <p>A questo punto:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="6">const selected = pages.filter((page) =&gt; page.id === pageName)[0] || pages[0];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
            <p>Seleziona la pagina a partire dal nome (o di default la prima pagina).</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="7">hide(pages);
            show(selected);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>
            <p>A questo punto si procede prima col nascondere tutte le pagine e poi mostrare quella selezionata.</p>
            <p>Infine:</p>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="8">window.addEventListener('popstate', render);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
            <p>L’evento popstate viene emesso ogni volta che cambia la url (ad esempio dopo aver cliccato su un link). Quindi quel che succede è che non appena l’utente clicca su un link interno questo evento viene intercettato dal navigator, che esegue la funzione render, che analizza la URL del browser, estrae il nome della pagina e la mostra.</p>
            <h2 class="wp-block-heading" data-id="articleTOC_3">Javascript: index</h2>
            <div class="hcb_wrap"><pre class="prism line-numbers  language-plain"><code class=" language-plain" data-hcb-clip="9">import { createNavigator } from "./navigator.js";
            const navigator = createNavigator(document.querySelector("#container"));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>
            <p>Il navigator può essere quindi incluso nella pagina index.js del progetto, analogamente a quanto già visto nella <a href="https://cipiaceinfo.it/docs/programmazione/javascript/componenti/" data-type="epkb_post_type_1" data-id="791">lezione sui componenti</a>.</p>
            </div>
        </div>
        <div class="row"><a href="#pagina0">Questo è un link alla homepage</a></div>
         <div class="row"><a href="#pagina1">Questo è un link a pagina 1</a></div>
         <div class="row"><a href="#pagina2">Questo è un link a pagina 2</a></div>                  
      </div>
   </div>
   <script type="module" src="index.js"></script>
</body>
</html>